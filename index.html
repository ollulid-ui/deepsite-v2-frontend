<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Compliance Automation SaaS</title>
  <link rel="icon" type="image/x-icon" href="http://static.photos/legal/32x32/1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
  <style>
    .hero-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="text-gray-800">
  <!-- Hero Section -->
  <section class="hero-gradient text-white py-20">
    <div class="container mx-auto px-6 text-center" data-aos="fade-up">
      <h1 class="text-5xl font-bold mb-4">Legal Compliance Automation</h1>
      <p class="text-xl mb-8">Simplify compliance document analysis with AI-powered automation.</p>
      <a href="#demo" class="bg-white text-indigo-600 font-semibold px-6 py-3 rounded-lg shadow hover:bg-gray-100">Try the Demo</a>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16">
    <div class="container mx-auto px-6">
      <div class="grid md:grid-cols-3 gap-8">
        <div class="feature-card bg-white p-6 rounded-2xl shadow" data-aos="fade-up" data-aos-delay="100">
          <i data-feather="file-text" class="w-12 h-12 text-indigo-600 mb-4"></i>
          <h3 class="text-xl font-semibold mb-2">Document Upload</h3>
          <p>Upload contracts, policies, or legal documents for automated compliance checks.</p>
        </div>
        <div class="feature-card bg-white p-6 rounded-2xl shadow" data-aos="fade-up" data-aos-delay="200">
          <i data-feather="search" class="w-12 h-12 text-indigo-600 mb-4"></i>
          <h3 class="text-xl font-semibold mb-2">AI Analysis</h3>
          <p>Get instant insights into missing clauses, risks, and compliance gaps.</p>
        </div>
        <div class="feature-card bg-white p-6 rounded-2xl shadow" data-aos="fade-up" data-aos-delay="300">
          <i data-feather="check-circle" class="w-12 h-12 text-indigo-600 mb-4"></i>
          <h3 class="text-xl font-semibold mb-2">Compliance Score</h3>
          <p>Receive a compliance score and recommendations to improve your documents.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Demo Section -->
  <section id="demo" class="bg-gray-50 py-16">
    <div class="container mx-auto px-6 text-center">
      <h2 class="text-3xl font-bold mb-6">Try the Demo</h2>
      <p class="mb-8">Upload a sample document and let our AI analyze compliance risks.</p>
      
      <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow" data-aos="fade-up">
        <label class="block mb-4">
          <span class="sr-only">Choose File</span>
          <input id="fileInput" type="file" class="hidden" />
          <div class="flex items-center justify-center px-4 py-2 bg-indigo-600 text-white rounded-lg cursor-pointer hover:bg-indigo-700">
            <i data-feather="upload" class="w-5 h-5 mr-2"></i> Choose Document
          </div>
        </label>
        <button id="analyzeBtn" type="button" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition">Analyze Document</button>
        <p id="uploadStatus" class="text-sm text-gray-500 mt-2"></p>

        <!-- Results go here -->
        <div id="analysisResult" class="mt-6 hidden text-left"></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-6 text-center">
    <p>&copy; 2025 Legal Compliance Automation SaaS. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script>
    AOS.init();
    feather.replace();

    // --- Backend Integration ---
    const API_BASE = (location.hostname === "localhost" || location.hostname === "127.0.0.1")
      ? "http://localhost:8000"
      : "https://legal-compliance-backend.onrender.com";

    const fileInput = document.getElementById("fileInput");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const statusEl = document.getElementById("uploadStatus");
    const resultEl = document.getElementById("analysisResult");

    function renderResult(data) {
      const analysis = data?.analysis || {};
      const risks = analysis.compliance_risks || [];

      let risksHtml = "";
      if (risks.length) {
        risksHtml = `
          <h4 class="font-semibold mb-2">Findings</h4>
          <ul class="list-disc list-inside space-y-1">
            ${risks.map(r => `
              <li>
                <span class="font-medium">${r.issue}</span>
                <span class="ml-2 text-sm text-gray-600">(Severity: <span class="font-semibold">${r.severity}</span>)</span>
              </li>
            `).join("")}
          </ul>
        `;
      } else {
        risksHtml = `<p class="text-green-600">No compliance risks found ðŸŽ‰</p>`;
      }

      resultEl.innerHTML = `
        <div class="bg-gray-50 border rounded-lg p-4">
          <p><strong>Filename:</strong> ${analysis.filename || "n/a"}</p>
          <p><strong>Status:</strong> ${analysis.status || "n/a"}</p>
          ${risksHtml}
        </div>
      `;
      resultEl.classList.remove("hidden");
    }

    if (analyzeBtn) {
      analyzeBtn.addEventListener("click", async () => {
        if (!fileInput.files.length) {
          statusEl.textContent = "Please choose a file first.";
          return;
        }

        statusEl.textContent = "Uploading...";
        resultEl.classList.add("hidden");
        resultEl.innerHTML = "";

        try {
          const formData = new FormData();
          formData.append("file", fileInput.files[0]);

          const res = await fetch(`${API_BASE}/analyze/`, {
            method: "POST",
            body: formData
          });

          if (!res.ok) {
            throw new Error(`Upload failed: ${res.status} ${res.statusText}`);
          }

          const data = await res.json();
          statusEl.textContent = "Analysis complete.";
          renderResult(data);
        } catch (err) {
          statusEl.textContent = "Error during upload.";
          resultEl.classList.remove("hidden");
          resultEl.innerHTML = `<p class="text-red-600">Upload failed: ${err.message}</p>`;
        }
      });
    }
  </script>
</body>
</html>
